<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>传输方式 | Project X</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Xray 官方文档">
    
    <link rel="preload" href="/Xray-docs-next/assets/css/0.styles.a477457d.css" as="style"><link rel="preload" href="/Xray-docs-next/assets/js/app.a96fae3d.js" as="script"><link rel="preload" href="/Xray-docs-next/assets/js/2.2c611514.js" as="script"><link rel="preload" href="/Xray-docs-next/assets/js/43.c696f9f7.js" as="script"><link rel="prefetch" href="/Xray-docs-next/assets/js/10.709e5139.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/11.b048d6ae.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/12.61db4a47.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/13.46105034.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/14.4f7b1a2a.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/15.e5e2b060.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/16.5491619d.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/17.23841ed2.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/18.af0e95c4.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/19.9e92e7b1.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/20.d2acb728.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/21.a7097c75.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/22.dfec50ba.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/23.4ea1d92a.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/24.0100658e.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/25.2ddabb24.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/26.1a1f4097.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/27.610552d5.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/28.8e66f86c.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/29.7295fad6.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/3.3b699c9b.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/30.49404801.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/31.16a02e2e.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/32.fd96f2d6.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/33.f4b0124b.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/34.0453aca9.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/35.de2c3000.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/36.d32d5c85.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/37.f475ef85.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/38.f87aea7b.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/39.0f51ac22.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/4.12605cf2.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/40.3366bf77.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/41.3c9505e9.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/42.8d7faec9.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/44.5ce13b3b.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/45.3f3deec9.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/46.37b6fec8.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/47.5db6060e.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/48.1eae91ec.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/49.0bcabc27.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/5.7f355a6c.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/50.2d52d887.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/51.232e51b9.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/52.6012eaa8.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/53.7bd8c591.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/54.0fe77b39.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/55.1f0a5175.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/56.1fde43d8.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/57.ed398515.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/58.35aa8c27.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/6.dcf138e0.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/7.33ce2404.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/8.b9cd1f1c.js"><link rel="prefetch" href="/Xray-docs-next/assets/js/9.cfb5d221.js">
    <link rel="stylesheet" href="/Xray-docs-next/assets/css/0.styles.a477457d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Xray-docs-next/" class="home-link router-link-active"><!----> <span class="site-name">Project X</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Xray-docs-next/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/Xray-docs-next/about/news.html" class="nav-link">
  大史记
</a></div><div class="nav-item"><a href="/Xray-docs-next/config/" class="nav-link router-link-active">
  配置指南
</a></div><div class="nav-item"><a href="/Xray-docs-next/development/" class="nav-link">
  开发指南
</a></div><div class="nav-item"><a href="/Xray-docs-next/usage/" class="nav-link">
  使用指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">多语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">多语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Xray-docs-next/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/Xray-docs-next/en.html" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/xtls/xray-core" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Xray-docs-next/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/Xray-docs-next/about/news.html" class="nav-link">
  大史记
</a></div><div class="nav-item"><a href="/Xray-docs-next/config/" class="nav-link router-link-active">
  配置指南
</a></div><div class="nav-item"><a href="/Xray-docs-next/development/" class="nav-link">
  开发指南
</a></div><div class="nav-item"><a href="/Xray-docs-next/usage/" class="nav-link">
  使用指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">多语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">多语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Xray-docs-next/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/Xray-docs-next/en.html" class="nav-link">
  English
</a></li></ul></div></div> <a href="https://github.com/xtls/xray-core" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>特性详解</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Xray-docs-next/config/features/vless.html" class="sidebar-link">VLESS 协议详解</a></li><li><a href="/Xray-docs-next/config/features/xtls.html" class="sidebar-link">XTLS 深度剖析</a></li><li><a href="/Xray-docs-next/config/features/fallback.html" class="sidebar-link">Fallback 回落</a></li><li><a href="/Xray-docs-next/config/features/env.html" class="sidebar-link">环境变量</a></li><li><a href="/Xray-docs-next/config/features/multiple.html" class="sidebar-link">多文件配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/Xray-docs-next/config/inbounds/" class="sidebar-heading clickable"><span>入站代理</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Xray-docs-next/config/inbounds/dokodemo.html" class="sidebar-link">Dokodemo Door</a></li><li><a href="/Xray-docs-next/config/inbounds/http.html" class="sidebar-link">HTTP</a></li><li><a href="/Xray-docs-next/config/inbounds/shadowsocks.html" class="sidebar-link">Shadowsocks</a></li><li><a href="/Xray-docs-next/config/inbounds/socks.html" class="sidebar-link">Socks</a></li><li><a href="/Xray-docs-next/config/inbounds/trojan.html" class="sidebar-link">Trojan</a></li><li><a href="/Xray-docs-next/config/inbounds/vless.html" class="sidebar-link">VLESS</a></li><li><a href="/Xray-docs-next/config/inbounds/vmess.html" class="sidebar-link">VMess</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/Xray-docs-next/config/outbounds/" class="sidebar-heading clickable"><span>出站代理</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Xray-docs-next/config/outbounds/blackhole.html" class="sidebar-link">Blackhole</a></li><li><a href="/Xray-docs-next/config/outbounds/dns.html" class="sidebar-link">DNS</a></li><li><a href="/Xray-docs-next/config/outbounds/freedom.html" class="sidebar-link">Freedom</a></li><li><a href="/Xray-docs-next/config/outbounds/http.html" class="sidebar-link">HTTP</a></li><li><a href="/Xray-docs-next/config/outbounds/shadowsocks.html" class="sidebar-link">Shadowsocks</a></li><li><a href="/Xray-docs-next/config/outbounds/socks.html" class="sidebar-link">Socks</a></li><li><a href="/Xray-docs-next/config/outbounds/trojan.html" class="sidebar-link">Trojan</a></li><li><a href="/Xray-docs-next/config/outbounds/vless.html" class="sidebar-link">VLESS</a></li><li><a href="/Xray-docs-next/config/outbounds/vmess.html" class="sidebar-link">VMess</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/Xray-docs-next/config/transports/" class="sidebar-heading clickable"><span>底层传输</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/Xray-docs-next/config/transports/grpc.html" class="sidebar-link">gRPC</a></li><li><a href="/Xray-docs-next/config/transports/h2.html" class="sidebar-link">HTTP/2</a></li><li><a href="/Xray-docs-next/config/transports/mkcp.html" class="sidebar-link">mKCP</a></li><li><a href="/Xray-docs-next/config/transports/quic.html" class="sidebar-link">QUIC</a></li><li><a href="/Xray-docs-next/config/transports/tcp.html" class="sidebar-link">TCP</a></li><li><a href="/Xray-docs-next/config/transports/websocket.html" class="sidebar-link">WebSocket</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="传输方式"><a href="#传输方式" class="header-anchor">#</a> 传输方式</h1> <p>传输方式（transport）是当前 Xray 节点和其它节点对接的方式。</p> <p>传输方式指定了稳定的数据传输的方式。通常来说，一个网络连接的两端需要有对称的传输方式。比如一端用了 WebSocket，那么另一个端也必须使用 WebSocket，否则无法建立连接。</p> <p>传输方式（transport）配置有两部分:</p> <ol><li><p>全局设置（<a href="#transportobject">TransportObject</a>）</p></li> <li><p>指定inbound/outbound配置（<a href="#streamsettingsobject">StreamSettingsObject</a>）。</p> <p>指定inbound/outbound配置时,可以指定每个单独的inbound/outbound用怎样的方式传输。</p> <p>通常来说客户端和服务器对应的inbound和outbound需要使用同样的传输方式。当inbound/outbound配置指定了一种传输方式，但没有填写其具体设置时，此传输方式会使用全局配置中的设置。</p></li></ol> <h2 id="transportobject"><a href="#transportobject" class="header-anchor">#</a> TransportObject</h2> <p><code>TransportObject</code> 对应配置文件的 <code>transport</code> 项。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;transport&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;tcpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;kcpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;wsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;quicSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;grpcSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>tcpSettings</code>: <a href="./transports/tcp">TcpObject</a></p></blockquote> <p>针对 TCP 连接的配置。</p> <blockquote><p><code>kcpSettings</code>: <a href="./transports/mkcp">KcpObject</a></p></blockquote> <p>针对 mKCP 连接的配置。</p> <blockquote><p><code>wsSettings</code>: <a href="./transports/websocket">WebSocketObject</a></p></blockquote> <p>针对 WebSocket 连接的配置。</p> <blockquote><p><code>httpSettings</code>: <a href="./transports/h2">HttpObject</a></p></blockquote> <p>针对 HTTP/2 连接的配置。</p> <blockquote><p><code>quicSettings</code>: <a href="./transports/quic">QuicObject</a></p></blockquote> <p>针对 QUIC 连接的配置。</p> <blockquote><p><code>grpcSettings</code>: <a href="./transports/grpc">GRPCObject</a></p></blockquote> <p>针对 gRPC 连接的配置。</p> <blockquote><p><code>dsSettings</code>: <a href="./transports/domainsocket">DomainSocketObject</a></p></blockquote> <p>针对 Domain Socket 连接的配置。</p> <h2 id="streamsettingsobject"><a href="#streamsettingsobject" class="header-anchor">#</a> StreamSettingsObject</h2> <p><code>StreamSettingsObject</code> 对应inbound/outbound中的 <code>streamSettings</code> 项。每一个 inbound/outbound 都可以分别配置不同的传输配置，都可以设置 <code>streamSettings</code> 来进行一些传输的配置。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tcp&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;security&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tlsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;xtlsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;kcpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;wsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;quicSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dsSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;grpcSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sockopt&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;mark&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;tcpFastOpen&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;tproxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;domainStrategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AsIs&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dialerProxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>network</code>: &quot;tcp&quot; | &quot;kcp&quot; | &quot;ws&quot; | &quot;http&quot; | &quot;domainsocket&quot; | &quot;quic&quot;</p></blockquote> <p>连接的数据流所使用的传输方式类型，默认值为 <code>&quot;tcp&quot;</code></p> <blockquote><p><code>security</code>: &quot;none&quot; | &quot;tls&quot; | &quot;xtls&quot;</p></blockquote> <p>是否启用传输层加密，支持的选项有</p> <ul><li><code>&quot;none&quot;</code> 表示不加密（默认值）</li> <li><code>&quot;tls&quot;</code> 表示使用 <a href="https://en.wikipedia.org/wiki/base/transport_Layer_Security" target="_blank" rel="noopener noreferrer">TLS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li> <li><code>&quot;xtls&quot;</code> 表示使用 <a href="./examples/xtls">XTLS</a>。</li></ul> <blockquote><p><code>tlsSettings</code>: <a href="#tlsobject">TLSObject</a></p></blockquote> <p>TLS 配置。TLS 由 Golang 提供，通常情况下TLS协商的结果为使用 TLS 1.3，不支持 DTLS。</p> <blockquote><p><code>xtlsSettings</code>: <a href="#tlsobject">XTLSObject</a></p></blockquote> <p>XTLS 配置。XTLS 是 Xray 的原创黑科技, 也是使 Xray 性能一骑绝尘的核心动力.
XTLS 与 TLS 有相同的安全性, 配置方式也和TLS一致. 点击此处查看<a href="./examples/xtls">XTLS的技术细节剖析</a></p> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>TLS / XTLS 是目前最安全的传输加密方案, 且外部看来流量类型和正常上网具有一致性.
启用 XTLS 并且配置合适的XTLS流控模式, 可以在保持和 TLS 相同的安全性的前提下, 性能达到数倍甚至十几倍的提升.
当 <code>security</code> 的值从'tls'改为'xtls'时, 只需将<code>tlsSettings</code> 修改成为 <code>xtlsSettings</code></p></div> <blockquote><p><code>tcpSettings</code>: <a href="./transports/tcp">TcpObject</a></p></blockquote> <p>当前连接的 TCP 配置，仅当此连接使用 TCP 时有效。配置内容与上面的全局配置相同。</p> <blockquote><p><code>kcpSettings</code>: <a href="./transports/mkcp">KcpObject</a></p></blockquote> <p>当前连接的 mKCP 配置，仅当此连接使用 mKCP 时有效。配置内容与上面的全局配置相同。</p> <blockquote><p><code>wsSettings</code>: <a href="./transports/websocket">WebSocketObject</a></p></blockquote> <p>当前连接的 WebSocket 配置，仅当此连接使用 WebSocket 时有效。配置内容与上面的全局配置相同。</p> <blockquote><p><code>httpSettings</code>: <a href="./transports/h2">HttpObject</a></p></blockquote> <p>当前连接的 HTTP/2 配置，仅当此连接使用 HTTP/2 时有效。配置内容与上面的全局配置相同。</p> <blockquote><p><code>quicSettings</code>: <a href="./transports/quic">QUICObject</a></p></blockquote> <p>当前连接的 QUIC 配置，仅当此连接使用 QUIC 时有效。配置内容与上面的全局配置相同。</p> <blockquote><p><code>grpcSettings</code>: <a href="./transports/grpc">GRPCObject</a></p></blockquote> <p>当前连接的 gRPC 配置，仅当此连接使用 gRPC 时有效。配置内容与上面的全局配置相同。</p> <blockquote><p><code>dsSettings</code>: <a href="./transports/domainsocket">DomainSocketObject</a></p></blockquote> <p>当前连接的 Domain socket 配置，仅当此连接使用 Domain socket 时有效。配置内容与上面的全局配置相同。</p> <blockquote><p><code>sockopt</code>: <a href="#sockoptobject">SockoptObject</a></p></blockquote> <p>透明代理相关的具体配置。</p> <h3 id="tlsobject"><a href="#tlsobject" class="header-anchor">#</a> TLSObject</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;serverName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;xray.com&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;allowInsecure&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;alpn&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;h2&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;http/1.1&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;minVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;maxVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;preferServerCipherSuites&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;cipherSuites&quot;</span><span class="token operator">:</span> <span class="token string">&quot;此处填写你需要的加密套件名称,每个套件名称之间用:进行分隔&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;certificates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;disableSystemRoot&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;enableSessionResumption&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>serverName</code>: string</p></blockquote> <p>指定服务器端证书的域名，在连接由 IP 建立时有用。</p> <p>当目标连接由域名指定时，比如在 Socks inbound接收到了域名，或者由 Sniffing 功能探测出了域名，这个域名会自动用于 <code>serverName</code>，无须手动配置。</p> <blockquote><p><code>alpn</code>: [ string ]</p></blockquote> <p>一个字符串数组，指定了 TLS 握手时指定的 ALPN 数值。默认值为 <code>[&quot;h2&quot;, &quot;http/1.1&quot;]</code>。</p> <blockquote><p><code>minVersion</code>: [ string ]</p></blockquote> <p>minVersion为可接受的最小SSL/TLS版本。</p> <blockquote><p><code>maxVersion</code>: [ string ]</p></blockquote> <p>maxVersion为可接受的最大SSL/TLS版本。</p> <blockquote><p><code>preferServerCipherSuites</code>: true | false</p></blockquote> <p>指示服务器选择客户端最喜欢的密码套件 或 服务器最优选的密码套件。</p> <p>如果为true则为使用服务器的最优选的密码套件</p> <blockquote><p><code>cipherSuites</code>: [ string ]</p></blockquote> <p>CipherSuites用于配置受支持的密码套件列表, 每个套件名称之间用:进行分隔.</p> <p>你可以在<a href="https://golang.org/src/crypto/tls/cipher_suites.go#L500" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>或<a href="https://golang.org/src/crypto/tls/cipher_suites.go#L44" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>找到golang加密套件的名词和说明</p> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>以上两项配置为非必要选项，正常情况下不影响安全性
在未配置的情况下golang根据设备自动选择.
若不熟悉, 请勿配置此选项, 填写不当引起的问题自行负责</p></div> <blockquote><p><code>allowInsecure</code>: true | false</p></blockquote> <p>是否允许不安全连接（仅用于客户端）。默认值为 <code>false</code>。</p> <p>当值为 <code>true</code> 时，Xray 不会检查远端主机所提供的 TLS 证书的有效性。</p> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>出于安全性考虑，这个选项不应该在实际场景中选择true，否则可能遭受中间人攻击。</p></div> <blockquote><p><code>disableSystemRoot</code>: true | false</p></blockquote> <p>是否禁用操作系统自带的 CA 证书。默认值为 <code>false</code>。</p> <p>当值为 <code>true</code> 时，Xray 只会使用 <code>certificates</code> 中指定的证书进行 TLS 握手。当值为 <code>false</code> 时，Xray 只会使用操作系统自带的 CA 证书进行 TLS 握手。</p> <blockquote><p><code>enableSessionResumption</code>: true | false</p></blockquote> <p>此参数的设置为false时, ClientHello 里没有 session_ticket 这个扩展。
通常来讲 go 语言程序的 ClientHello 里并没有用到这个扩展, 因此建议保持默认值。
默认值为 <code>false</code>。</p> <blockquote><p><code>certificates</code>: [ <a href="#certificateobject">CertificateObject</a> ]</p></blockquote> <p>证书列表，其中每一项表示一个证书（建议 fullchain）。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>如果要在 ssllibs 或者 myssl 获得 A/A+ 等级的评价, 请参考<a href="https://github.com/XTLS/Xray-core/discussions/56#discussioncomment-215600" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <h4 id="certificateobject"><a href="#certificateobject" class="header-anchor">#</a> CertificateObject</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;ocspStapling&quot;</span><span class="token operator">:</span> <span class="token number">3600</span><span class="token punctuation">,</span>
    <span class="token property">&quot;usage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;encipherment&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;certificateFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/certificate.crt&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;keyFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/path/to/key.key&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;certificate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;--BEGIN CERTIFICATE--&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;MIICwDCCAaigAwIBAgIRAO16JMdESAuHidFYJAR/7kAwDQYJKoZIhvcNAQELBQAw&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;ADAeFw0xODA0MTAxMzU1MTdaFw0xODA0MTAxNTU1MTdaMAAwggEiMA0GCSqGSIb3&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;DQEBAQUAA4IBDwAwggEKAoIBAQCs2PX0fFSCjOemmdm9UbOvcLctF94Ox4BpSfJ+&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;3lJHwZbvnOFuo56WhQJWrclKoImp/c9veL1J4Bbtam3sW3APkZVEK9UxRQ57HQuw&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;OzhV0FD20/0YELou85TwnkTw5l9GVCXT02NG+pGlYsFrxesUHpojdl8tIcn113M5&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;pypgDPVmPeeORRf7nseMC6GhvXYM4txJPyenohwegl8DZ6OE5FkSVR5wFQtAhbON&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;OAkIVVmw002K2J6pitPuJGOka9PxcCVWhko/W+JCGapcC7O74palwBUuXE1iH+Jp&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;noPjGp4qE2ognW3WH/sgQ+rvo20eXb9Um1steaYY8xlxgBsXAgMBAAGjNTAzMA4G&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;A1UdDwEB/wQEAwIFoDATBgNVHSUEDDAKBggrBgEFBQcDATAMBgNVHRMBAf8EAjAA&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;MA0GCSqGSIb3DQEBCwUAA4IBAQBUd9sGKYemzwPnxtw/vzkV8Q32NILEMlPVqeJU&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;7UxVgIODBV6A1b3tOUoktuhmgSSaQxjhYbFAVTD+LUglMUCxNbj56luBRlLLQWo+&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;9BUhC/ow393tLmqKcB59qNcwbZER6XT5POYwcaKM75QVqhCJVHJNb1zSEE7Co7iO&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;6wIan3lFyjBfYlBEz5vyRWQNIwKfdh5cK1yAu13xGENwmtlSTHiwbjBLXfk+0A/8&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;r/2s+sCYUkGZHhj8xY7bJ1zg0FRalP5LrqY+r6BckT1QPDIQKYy615j1LpOtwZe/&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;d4q7MD/dkzRDsch7t2cIjM/PYeMuzh87admSyL6hdtK0Nm/Q&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;--END CERTIFICATE--&quot;</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;--BEGIN RSA PRIVATE KEY--&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;MIIEowIBAAKCAQEArNj19HxUgoznppnZvVGzr3C3LRfeDseAaUnyft5SR8GW75zh&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;bqOeloUCVq3JSqCJqf3Pb3i9SeAW7Wpt7FtwD5GVRCvVMUUOex0LsDs4VdBQ9tP9&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;GBC6LvOU8J5E8OZfRlQl09NjRvqRpWLBa8XrFB6aI3ZfLSHJ9ddzOacqYAz1Zj3n&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;jkUX+57HjAuhob12DOLcST8np6IcHoJfA2ejhORZElUecBULQIWzjTgJCFVZsNNN&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;itieqYrT7iRjpGvT8XAlVoZKP1viQhmqXAuzu+KWpcAVLlxNYh/iaZ6D4xqeKhNq&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;IJ1t1h/7IEPq76NtHl2/VJtbLXmmGPMZcYAbFwIDAQABAoIBAFCgG4phfGIxK9Uw&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;qrp+o9xQLYGhQnmOYb27OpwnRCYojSlT+mvLcqwvevnHsr9WxyA+PkZ3AYS2PLue&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;C4xW0pzQgdn8wENtPOX8lHkuBocw1rNsCwDwvIguIuliSjI8o3CAy+xVDFgNhWap&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/CMzfQYziB7GlnrM6hH838iiy0dlv4I/HKk+3/YlSYQEvnFokTf7HxbDDmznkJTM&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;aPKZ5qbnV+4AcQfcLYJ8QE0ViJ8dVZ7RLwIf7+SG0b0bqloti4+oQXqGtiESUwEW&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;/Wzi7oyCbFJoPsFWp1P5+wD7jAGpAd9lPIwPahdr1wl6VwIx9W0XYjoZn71AEaw4&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;bK4xUXECgYEA3g2o9WqyrhYSax3pGEdvV2qN0VQhw7Xe+jyy98CELOO2DNbB9QNJ&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;8cSSU/PjkxQlgbOJc8DEprdMldN5xI/srlsbQWCj72wXxXnVnh991bI2clwt7oYi&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;pcGZwzCrJyFL+QaZmYzLxkxYl1tCiiuqLm+EkjxCWKTX/kKEFb6rtnMCgYEAx0WR&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;L8Uue3lXxhXRdBS5QRTBNklkSxtU+2yyXRpvFa7Qam+GghJs5RKfJ9lTvjfM/PxG&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;3vhuBliWQOKQbm1ZGLbgGBM505EOP7DikUmH/kzKxIeRo4l64mioKdDwK/4CZtS7&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;az0Lq3eS6bq11qL4mEdE6Gn/Y+sqB83GHZYju80CgYABFm4KbbBcW+1RKv9WSBtK&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;gVIagV/89moWLa/uuLmtApyEqZSfn5mAHqdc0+f8c2/Pl9KHh50u99zfKv8AsHfH&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;TtjuVAvZg10GcZdTQ/I41ruficYL0gpfZ3haVWWxNl+J47di4iapXPxeGWtVA+u8&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;eH1cvgDRMFWCgE7nUFzE8wKBgGndUomfZtdgGrp4ouLZk6W4ogD2MpsYNSixkXyW&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;64cIbV7uSvZVVZbJMtaXxb6bpIKOgBQ6xTEH5SMpenPAEgJoPVts816rhHdfwK5Q&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;8zetklegckYAZtFbqmM0xjOI6bu5rqwFLWr1xo33jF0wDYPQ8RHMJkruB1FIB8V2&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;GxvNAoGBAM4g2z8NTPMqX+8IBGkGgqmcYuRQxd3cs7LOSEjF9hPy1it2ZFe/yUKq&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;ePa2E8osffK5LBkFzhyQb0WrGC9ijM9E6rv10gyuNjlwXdFJcdqVamxwPUBtxRJR&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;cYTY2HRkJXDdtT0Bkc3josE6UUDvwMpO0CfAETQPto1tjNEDhQhT&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;--END RSA PRIVATE KEY--&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>ocspStapling</code>: number</p></blockquote> <p>ocspStapling 检查更新时间间隔。 单位：秒</p> <blockquote><p><code>usage</code>: &quot;encipherment&quot; | &quot;verify&quot; | &quot;issue&quot;</p></blockquote> <p>证书用途，默认值为 <code>&quot;encipherment&quot;</code>。</p> <ul><li><code>&quot;encipherment&quot;</code>：证书用于 TLS 认证和加密。</li> <li><code>&quot;verify&quot;</code>：证书用于验证远端 TLS 的证书。当使用此项时，当前证书必须为 CA 证书。</li> <li><code>&quot;issue&quot;</code>：证书用于签发其它证书。当使用此项时，当前证书必须为 CA 证书。</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP 1</p> <p>在 Windows 平台上可以将自签名的 CA 证书安装到系统中，即可验证远端 TLS 的证书。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP 2</p> <p>当有新的客户端请求时，假设所指定的 <code>serverName</code> 为 <code>&quot;xray.com&quot;</code>，Xray 会先从证书列表中寻找可用于 <code>&quot;xray.com&quot;</code> 的证书，如果没有找到，则使用任一 <code>usage</code> 为 <code>&quot;issue&quot;</code> 的证书签发一个适用于 <code>&quot;xray.com&quot;</code> 的证书，有效期为一小时。并将新的证书加入证书列表，以供后续使用。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP 3</p> <p>当 <code>certificateFile</code> 和 <code>certificate</code> 同时指定时，Xray 优先使用 <code>certificateFile</code>。<code>keyFile</code> 和 <code>key</code> 也一样。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP 4</p> <p>当 <code>usage</code> 为 <code>&quot;verify&quot;</code> 时，<code>keyFile</code> 和 <code>key</code> 可均为空。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP 5</p> <p>使用 <code>xray tls cert</code> 可以生成自签名的 CA 证书。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP 6</p> <p>如已经拥有一个域名, 可以使用工具便捷的获取免费第三方证书,如<a href="https://github.com/acmesh-official/acme.sh" target="_blank" rel="noopener noreferrer">acme.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <blockquote><p><code>certificateFile</code>: string</p></blockquote> <p>证书文件路径，如使用 OpenSSL 生成，后缀名为 .crt。</p> <blockquote><p><code>certificate</code>: [ string ]</p></blockquote> <p>一个字符串数组，表示证书内容，格式如样例所示。<code>certificate</code> 和 <code>certificateFile</code> 二者选一。</p> <blockquote><p><code>keyFile</code>: string</p></blockquote> <p>密钥文件路径，如使用 OpenSSL 生成，后缀名为 .key。目前暂不支持需要密码的 key 文件。</p> <blockquote><p><code>key</code>: [ string ]</p></blockquote> <p>一个字符串数组，表示密钥内容，格式如样例如示。<code>key</code> 和 <code>keyFile</code> 二者选一。</p> <h3 id="sockoptobject"><a href="#sockoptobject" class="header-anchor">#</a> SockoptObject</h3> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;mark&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tcpFastOpen&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tproxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;domainStrategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AsIs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dialerProxy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p><code>mark</code>: number</p></blockquote> <p>一个整数。当其值非零时，在ountbound连接以此数值上标记 SO_MARK。</p> <ul><li>仅适用于 Linux 系统。</li> <li>需要 CAP_NET_ADMIN 权限。</li></ul> <blockquote><p><code>tcpFastOpen</code>: true | false</p></blockquote> <p>是否启用 <a href="https://zh.wikipedia.org/wiki/TCP%E5%BF%AB%E9%80%9F%E6%89%93%E5%BC%80" target="_blank" rel="noopener noreferrer">TCP Fast Open<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>当其值为 <code>true</code> 时，强制开启 TFO；当其值为 <code>false</code> 时，强制关闭 TFO；当此项不存在时，使用系统默认设置。
可用于inbound/ountbound。</p> <ul><li>仅在以下版本（或更新版本）的操作系统中可用:
<ul><li>Windows 10 (1604)</li> <li>Mac OS 10.11 / iOS 9</li> <li>Linux 3.16：系统已默认开启，无需配置。</li></ul></li></ul> <blockquote><p><code>tproxy</code>: &quot;redirect&quot; | &quot;tproxy&quot; | &quot;off&quot;</p></blockquote> <p>是否开启透明代理（仅适用于 Linux）。</p> <ul><li><code>&quot;redirect&quot;</code>：使用 Redirect 模式的透明代理。支持所有基于 IPv4/6 的 TCP 和 UDP 连接。</li> <li><code>&quot;tproxy&quot;</code>：使用 TProxy 模式的透明代理。支持所有基于 IPv4/6 的 TCP 和 UDP 连接。</li> <li><code>&quot;off&quot;</code>：关闭透明代理。</li></ul> <p>透明代理需要 Root 或 CAP_NET_ADMIN 权限。</p> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>当 <a href="./inbounds/dokodemo">Dokodemo-door</a> 中指定了 <code>followRedirect</code>为<code>true</code>，且 Sockopt设置中的<code>tproxy</code> 为空时，Sockopt设置中的<code>tproxy</code> 的值会被设为 <code>&quot;redirect&quot;</code>。</p></div> <blockquote><p><code>domainStrategy</code>: &quot;AsIs&quot; | &quot;UseIP&quot; | &quot;UseIPv4&quot; | &quot;UseIPv6&quot;</p></blockquote> <p>在之前的版本中，当 Xray 尝试使用域名建立系统连接时，域名的解析由系统完成，不受 Xray 控制。这导致了在 <a href="https://github.com/v2ray/v2ray-core/issues/1909" target="_blank" rel="noopener noreferrer">非标准Linux环境中无法解析域名<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等问题。为此，Xray 1.3.1 为 Sockopt 引入了 Freedom 中的 domainStrategy，解决了此问题。</p> <p>在目标地址为域名时, 配置相应的值, SysteDailer 的行为模式如下:</p> <ul><li><code>&quot;AsIs&quot;</code>: 通过系统DNS服务器解析获取IP, 向此域名发出连接。</li> <li><code>&quot;UseIP&quot;</code>、<code>&quot;UseIPv4&quot;</code> 和 <code>&quot;UseIPv6&quot;</code>: Xray 使用<a href="../dns">内置 DNS 服务器</a>解析获取IP, 向此域名发出连接。</li></ul> <p>默认值为 <code>&quot;AsIs&quot;</code>。</p> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>如果启用了此功能，将有可能导致通过 <code>代理服务器</code> 代理 <code>解析代理服务器IP的查询</code> 的死循环。因此，<strong>不建议</strong> 经验不足的用户擅自使用此功能。</p></div> <blockquote><p><code>dialerProxy</code>: &quot;&quot;</p></blockquote> <p>一个出站代理的标识。当值不为空时，将使用指定的outbound发出连接。
此选项可用于支持底层传输方式的链式转发。</p> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>此选项与 PorxySettingsObject.Tag 不兼容</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/xtls/Xray-docs-next/edit/main/docs/config/transport.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/Xray-docs-next/assets/js/app.a96fae3d.js" defer></script><script src="/Xray-docs-next/assets/js/2.2c611514.js" defer></script><script src="/Xray-docs-next/assets/js/43.c696f9f7.js" defer></script>
  </body>
</html>

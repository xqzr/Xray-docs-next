(self.webpackChunkXray_docs_next=self.webpackChunkXray_docs_next||[]).push([[9346],{9481:(l,n,e)=>{"use strict";e.r(n),e.d(n,{data:()=>m});const m={key:"v-717c6376",path:"/document/level-0/ch05-webpage.html",title:"【第 5 章】网站建设篇",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"5.1 为什么要做一个网站？",slug:"_5-1-为什么要做一个网站",children:[]},{level:2,title:"5.2 登录 VPS、安装运行 Nginx",slug:"_5-2-登录-vps、安装运行-nginx",children:[]},{level:2,title:"5.3 创建一个最简单的网页",slug:"_5-3-创建一个最简单的网页",children:[]},{level:2,title:"5.4 常见错误的说明",slug:"_5-4-常见错误的说明",children:[]},{level:2,title:"5.5 你的进度",slug:"_5-5-你的进度",children:[]}],filePathRelative:"document/level-0/ch05-webpage.md",git:{updatedTime:1617517861e3,contributors:[]}}},479:(l,n,e)=>{"use strict";e.r(n),e.d(n,{default:()=>D});var m=e(6252);const t=e.p+"assets/img/ch05-img01-nginx-default-running.df0c3d88.png",s=e.p+"assets/img/ch05-img02-nginx-conf-full.daa78f13.gif",a=e.p+"assets/img/ch05-img03-nginx-http-running.c5c64637.png",i=(0,m.Wm)("h1",{id:"【第-5-章】网站建设篇"},[(0,m.Wm)("a",{class:"header-anchor",href:"#【第-5-章】网站建设篇"},"#"),(0,m.Uk)(" 【第 5 章】网站建设篇")],-1),W=(0,m.Wm)("h2",{id:"_5-1-为什么要做一个网站"},[(0,m.Wm)("a",{class:"header-anchor",href:"#_5-1-为什么要做一个网站"},"#"),(0,m.Uk)(" 5.1 为什么要做一个网站？")],-1),u=(0,m.Wm)("p",null,"新人也许会迷惑，为什么科学上网还要建一个网站？我不会编程啊，是不是特别麻烦？",-1),r=(0,m.Wm)("p",null,"先回答第一个问题，建网站的原因有：",-1),c=(0,m.Wm)("ol",null,[(0,m.Wm)("li",null,"申请合法的 TLS 证书（非常重要）"),(0,m.Wm)("li",null,"提供合理的回落，防止主动探测攻击，提高安全性"),(0,m.Wm)("li",null,"建设一个伪装站（如博客、私人网盘、多媒体网站、游戏网站等），直接访问时有合理的前台，使流量使用看上去更合理。")],-1),o=(0,m.Wm)("p",null,"再回答第二个问题：",-1),d=(0,m.Wm)("ol",null,[(0,m.Wm)("li",null,"本文作为演示，仅仅使用了一个最简单的【单文件 html 页面 + Nginx】来搭建，以此完成上面的目标，所以【非常简单】"),(0,m.Wm)("li",null,"这个网站完全可以不仅仅是伪装，而是真的做大做强，这个复杂性就完全取决于你了"),(0,m.Wm)("li",null,"对于“伪装”和“网站运营”这个目标，需要的就是各不相同、秀出真我，需要的同学可以自行搜索学习。这个内容已经完全偏离了科学上网，本文就不深入解析了。")],-1),p=(0,m.Wm)("h2",{id:"_5-2-登录-vps、安装运行-nginx"},[(0,m.Wm)("a",{class:"header-anchor",href:"#_5-2-登录-vps、安装运行-nginx"},"#"),(0,m.Uk)(" 5.2 登录 VPS、安装运行 Nginx")],-1),g=(0,m.Wm)("ol",null,[(0,m.Wm)("li",null,[(0,m.Wm)("p",null,"这里用到的，都是之前已经详解过的命令，所以就不重复讲解了。看不懂的同学可以看看前面的章节哦。"),(0,m.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,m.Wm)("pre",{class:"language-text"},[(0,m.Wm)("code",null,"$ sudo apt update && sudo apt install nginx\n")]),(0,m.Wm)("div",{class:"line-numbers"},[(0,m.Wm)("span",{class:"line-number"},"1"),(0,m.Wm)("br")])])]),(0,m.Wm)("li",null,[(0,m.Wm)("p",null,[(0,m.Uk)("完成后，Nginx 已经自动运行。此时打开 Windows 上的浏览器并输入 "),(0,m.Wm)("code",null,"http://100.200.300.400:80"),(0,m.Uk)("，若看到下图的界面就说明 Nginx 已经正常在运行了。")]),(0,m.Wm)("p",null,[(0,m.Wm)("img",{src:t,alt:"Nginx默认界面"})])])],-1),b=(0,m.Wm)("h2",{id:"_5-3-创建一个最简单的网页"},[(0,m.Wm)("a",{class:"header-anchor",href:"#_5-3-创建一个最简单的网页"},"#"),(0,m.Uk)(" 5.3 创建一个最简单的网页")],-1),h=(0,m.Wm)("ol",null,[(0,m.Wm)("li",null,[(0,m.Wm)("p",null,"小小白白 Linux 基础命令："),(0,m.Wm)("table",null,[(0,m.Wm)("thead",null,[(0,m.Wm)("tr",null,[(0,m.Wm)("th",{style:{"text-align":"center"}},"编号"),(0,m.Wm)("th",{style:{"text-align":"center"}},"命令名称"),(0,m.Wm)("th",{style:{"text-align":"center"}},"命令说明")])]),(0,m.Wm)("tbody",null,[(0,m.Wm)("tr",null,[(0,m.Wm)("td",{style:{"text-align":"center"}},[(0,m.Wm)("code",null,"cmd-10")]),(0,m.Wm)("td",{style:{"text-align":"center"}},[(0,m.Wm)("code",null,"mkdir")]),(0,m.Wm)("td",{style:{"text-align":"center"}},"新建文件夹")]),(0,m.Wm)("tr",null,[(0,m.Wm)("td",{style:{"text-align":"center"}},[(0,m.Wm)("code",null,"cmd-11")]),(0,m.Wm)("td",{style:{"text-align":"center"}},[(0,m.Wm)("code",null,"systemctl reload")]),(0,m.Wm)("td",{style:{"text-align":"center"}},"重新加载某个服务")])])])]),(0,m.Wm)("li",null,[(0,m.Wm)("p",null,"小小白白 Linux 基础配置文件："),(0,m.Wm)("table",null,[(0,m.Wm)("thead",null,[(0,m.Wm)("tr",null,[(0,m.Wm)("th",{style:{"text-align":"center"}},"编号"),(0,m.Wm)("th",{style:{"text-align":"center"}},"配置文件位置"),(0,m.Wm)("th",{style:{"text-align":"center"}},"文件说明")])]),(0,m.Wm)("tbody",null,[(0,m.Wm)("tr",null,[(0,m.Wm)("td",{style:{"text-align":"center"}},[(0,m.Wm)("code",null,"conf-02")]),(0,m.Wm)("td",{style:{"text-align":"center"}},[(0,m.Wm)("code",null,"/etc/nginx/nginx.conf")]),(0,m.Wm)("td",{style:{"text-align":"center"}},"Nginx 程序设置")])])])]),(0,m.Wm)("li",null,[(0,m.Wm)("p",null,[(0,m.Uk)("创建一个网站专用的文件夹"),(0,m.Wm)("code",null,"/home/vpsadmin/www/webpage/"),(0,m.Uk)("并建立网页文件"),(0,m.Wm)("code",null,"index.html")]),(0,m.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,m.Wm)("pre",{class:"language-text"},[(0,m.Wm)("code",null,"$ mkdir -p ~/www/webpage/ && nano ~/www/webpage/index.html\n")]),(0,m.Wm)("div",{class:"line-numbers"},[(0,m.Wm)("span",{class:"line-number"},"1"),(0,m.Wm)("br")])])])],-1),x=(0,m.Wm)("div",{class:"custom-container warning"},[(0,m.Wm)("p",{class:"custom-container-title"},"注意"),(0,m.Wm)("p",null,[(0,m.Uk)("如果你用的不是 "),(0,m.Wm)("code",null,"vpsadmin"),(0,m.Uk)(" 这个用户名，请务必理解这条命令中 "),(0,m.Wm)("code",null,"“~”"),(0,m.Uk)(" 符号的意义（这关系到【第 5 步】你要写的内容）：")]),(0,m.Wm)("ul",null,[(0,m.Wm)("li",null,[(0,m.Uk)("如果是 【非 "),(0,m.Wm)("code",null,"root"),(0,m.Uk)(" 用户】，"),(0,m.Wm)("code",null,"“~”"),(0,m.Uk)(" 就等价于 "),(0,m.Wm)("code",null,"/home/用户名")]),(0,m.Wm)("li",null,[(0,m.Uk)("如果是 【 "),(0,m.Wm)("code",null,"root"),(0,m.Uk)(" 用户】，"),(0,m.Wm)("code",null,"“~”"),(0,m.Uk)(" 就等价于 "),(0,m.Wm)("code",null,"/root")])])],-1),k=(0,m.Wm)("ol",{start:"4"},[(0,m.Wm)("li",null,[(0,m.Wm)("p",null,[(0,m.Uk)("把下面的内容完整的复制进去，然后保存("),(0,m.Wm)("code",null,"ctrl+o"),(0,m.Uk)(")退出("),(0,m.Wm)("code",null,"ctrl+x"),(0,m.Uk)(")")]),(0,m.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,m.Wm)("pre",{class:"language-text"},[(0,m.Wm)("code",null,'<html>\n    \x3c!-- Text between angle brackets is an HTML tag and is not displayed.\n        Most tags, such as the HTML and /HTML tags that surround the contents of\n        a page, come in pairs; some tags, like HR, for a horizontal rule, stand\n        alone. Comments, such as the text you\'re reading, are not displayed when\n        the Web page is shown. The information between the HEAD and /HEAD tags is\n        not displayed. The information between the BODY and /BODY tags is displayed.--\x3e\n    <head>\n        <title>Enter a title, displayed at the top of the window.</title>\n    </head>\n    \x3c!-- The information between the BODY and /BODY tags is displayed.--\x3e\n    <body>\n        <h1>Enter the main heading, usually the same as the title.</h1>\n        <p>Be <b>bold</b> in stating your key points. Put them in a list: </p>\n        <ul>\n            <li>The first item in your list</li>\n            <li>The second item; <i>italicize</i> key words</li>\n        </ul>\n        <p>Improve your image by including an image. </p>\n        <p><img src="https://i.imgur.com/SEBww.jpg" alt="A Great HTML Resource"></p>\n        <p>Add a link to your favorite <a href="https://www.dummies.com/">Web site</a>.\n            Break up your page with a horizontal rule or two.\n        </p>\n        <hr>\n        <p>Finally, link to <a href="page2.html">another page</a> in your own Web site.</p>\n        \x3c!-- And add a copyright notice.--\x3e\n        <p>&#169; Wiley Publishing, 2011</p>\n    </body>\n</html>\n')]),(0,m.Wm)("div",{class:"line-numbers"},[(0,m.Wm)("span",{class:"line-number"},"1"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"2"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"3"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"4"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"5"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"6"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"7"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"8"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"9"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"10"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"11"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"12"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"13"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"14"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"15"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"16"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"17"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"18"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"19"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"20"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"21"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"22"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"23"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"24"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"25"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"26"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"27"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"28"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"29"),(0,m.Wm)("br")])])]),(0,m.Wm)("li",null,[(0,m.Wm)("p",null,[(0,m.Uk)("修改 "),(0,m.Wm)("code",null,"nginx.conf"),(0,m.Uk)(" 并重启 "),(0,m.Wm)("code",null,"Nginx"),(0,m.Uk)(" 服务，将"),(0,m.Wm)("code",null,"80"),(0,m.Uk)("端口的 http 访问定位到刚才建立的 "),(0,m.Wm)("code",null,"html"),(0,m.Uk)(" 页面上")]),(0,m.Wm)("ol",null,[(0,m.Wm)("li",null,[(0,m.Wm)("p",null,[(0,m.Uk)("修改 "),(0,m.Wm)("code",null,"nginx.conf"),(0,m.Uk)(" 。")]),(0,m.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,m.Wm)("pre",{class:"language-text"},[(0,m.Wm)("code",null,"$ sudo nano /etc/nginx/nginx.conf\n")]),(0,m.Wm)("div",{class:"line-numbers"},[(0,m.Wm)("span",{class:"line-number"},"1"),(0,m.Wm)("br")])])]),(0,m.Wm)("li",null,[(0,m.Wm)("p",null,[(0,m.Uk)("将下面一段，添加在 "),(0,m.Wm)("code",null,"http{}"),(0,m.Uk)(" 内，然后保存("),(0,m.Wm)("code",null,"ctrl+o"),(0,m.Uk)(")退出("),(0,m.Wm)("code",null,"ctrl+x"),(0,m.Uk)(")。（记得将域名替换为之前准备好的、包含二级域名的真实域名）")]),(0,m.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,m.Wm)("pre",{class:"language-text"},[(0,m.Wm)("code",null,"        server {\n                listen 80;\n                server_name 二级域名.你的域名.com;\n                root /home/vpsadmin/www/webpage;\n                index index.html;\n        }\n")]),(0,m.Wm)("div",{class:"line-numbers"},[(0,m.Wm)("span",{class:"line-number"},"1"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"2"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"3"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"4"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"5"),(0,m.Wm)("br"),(0,m.Wm)("span",{class:"line-number"},"6"),(0,m.Wm)("br")])]),(0,m.Wm)("div",{class:"custom-container warning"},[(0,m.Wm)("p",{class:"custom-container-title"},"特别注意！"),(0,m.Wm)("p",null,[(0,m.Uk)("如我在【第 3 步】中的提示所说，请务必确保 "),(0,m.Wm)("code",null,"/home/vpsadmin/www/webpage"),(0,m.Uk)(" 改成你的实际文件路径。")])])]),(0,m.Wm)("li",null,[(0,m.Wm)("p",null,[(0,m.Uk)("让 "),(0,m.Wm)("code",null,"nginx"),(0,m.Uk)(" 重新载入配置使其生效")]),(0,m.Wm)("div",{class:"language-text ext-text line-numbers-mode"},[(0,m.Wm)("pre",{class:"language-text"},[(0,m.Wm)("code",null,"$ sudo systemctl reload nginx\n")]),(0,m.Wm)("div",{class:"line-numbers"},[(0,m.Wm)("span",{class:"line-number"},"1"),(0,m.Wm)("br")])])]),(0,m.Wm)("li",null,[(0,m.Wm)("p",null,"完整的设置流程如下："),(0,m.Wm)("p",null,[(0,m.Wm)("img",{src:s,alt:"网页设置演示"})])]),(0,m.Wm)("li",null,[(0,m.Wm)("p",null,[(0,m.Uk)("此时如果你访问 "),(0,m.Wm)("code",null,"http://二级域名.你的域名.com"),(0,m.Uk)("，你看到这样的页面则说明成功：")]),(0,m.Wm)("p",null,[(0,m.Wm)("img",{src:a,alt:"http网页成功"})])])])])],-1),U=(0,m.Wm)("h2",{id:"_5-4-常见错误的说明"},[(0,m.Wm)("a",{class:"header-anchor",href:"#_5-4-常见错误的说明"},"#"),(0,m.Uk)(" 5.4 常见错误的说明")],-1),w=(0,m.Wm)("p",null,"首先，如果你一路按照文章的说明来操作，并且足够细心，那肯定不会出错。所以，我并不打算修改本文的写法。",-1),y=(0,m.Wm)("p",null,[(0,m.Uk)("那为什么依然有很多同学卡在了这一步，网页怎么也打不开呢？基本上就是两个字："),(0,m.Wm)("strong",null,"粗心"),(0,m.Uk)("。因为这里配置可能出现的问题只有两种，原因也只有两个。")],-1),v=(0,m.Wm)("p",null,"一、两种问题：",-1),f=(0,m.Wm)("ul",null,[(0,m.Wm)("li",null,[(0,m.Wm)("code",null,"nginx.conf"),(0,m.Uk)(" 里面的 "),(0,m.Wm)("code",null,"/home/vpsadmin/www/webpage"),(0,m.Uk)(" 这一条，与你的实际文件路径不符，"),(0,m.Wm)("code",null,"nginx"),(0,m.Uk)(" 找不到文件")]),(0,m.Wm)("li",null,[(0,m.Uk)("路径正确，但 "),(0,m.Wm)("code",null,"nginx"),(0,m.Uk)(" 无权读取")])],-1),_=(0,m.Wm)("p",null,"二、两个原因：",-1),T=(0,m.Wm)("ul",null,[(0,m.Wm)("li",null,[(0,m.Uk)("使用了【非 "),(0,m.Wm)("code",null,"root"),(0,m.Uk)(" 用户】，但仍然直接拷贝文中的命令不加修改。（这基本就等于抄答案时把同学的名字一起抄过去了）")]),(0,m.Wm)("li",null,[(0,m.Uk)("坚持使用【 "),(0,m.Wm)("code",null,"root"),(0,m.Uk)(" 用户】")])],-1),N=(0,m.Wm)("p",null,"碰到错误的同学，就回过头仔细看一下【5.3】中【第 3 步】和【第 5-2 步】的说明吧。",-1),H=(0,m.Wm)("div",{class:"custom-container warning"},[(0,m.Wm)("p",{class:"custom-container-title"},"WARNING"),(0,m.Wm)("p",null,[(0,m.Uk)("本文前期已经用了大量篇幅说明了使用【非 "),(0,m.Wm)("code",null,"root"),(0,m.Uk)(" 用户】对安全的重要性，全文也是基于此而写。所以，因使用【 "),(0,m.Wm)("code",null,"root"),(0,m.Uk)(" 用户】而导致的问题并不在本文的设计范围里。")]),(0,m.Wm)("p",null,[(0,m.Uk)("但我相信，坚持使用【 "),(0,m.Wm)("code",null,"root"),(0,m.Uk)(" 用户】的同学应该是有主见、动手能力强、或者有一定 Linux 基础的同学。问题的症结我已经全部说明了，我相信你一定可以自行解决。")])],-1),L=(0,m.Wm)("h2",{id:"_5-5-你的进度"},[(0,m.Wm)("a",{class:"header-anchor",href:"#_5-5-你的进度"},"#"),(0,m.Uk)(" 5.5 你的进度")],-1),B=(0,m.Wm)("p",null,"至此，Xray 的第一个基础设施【网页】已经就位，我们马上就进入第二个基础设施【证书】吧！",-1),A=(0,m.Wm)("blockquote",null,[(0,m.Wm)("p",null,"⬛⬛⬛⬛⬛⬜⬜⬜ 62.5%")],-1),D={render:function(l,n){return(0,m.wg)(),(0,m.j4)(m.HY,null,[i,W,u,r,c,o,d,p,g,b,h,x,k,U,w,y,v,f,_,T,N,H,L,B,A],64)}}}}]);